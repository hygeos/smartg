##############################################################
##				PARAMETRES DE LA SIMULATION					##
##############################################################


###
## Paramètres physiques ##
#_______________________#

# Nombre de photons a lancer (unsigned long long) (limite par le tableau du poids des photons en unsigned long long)
NBPHOTONS = 1000000000

# Angle zenithal solaire en degrés (float)
THSDEG = 30.

# Longueur d'onde [nm] (float)
LAMBDA = 443.

# Epaisseur optique moleculaire (Rayley) (float)
TAURAY = 0.0533

# Epaisseur optique aerosol (float)
TAUAER = 0.

# Albedo simple de diffusion des aerosols (float)
W0AER = 0.966883724738261

# Nom absolu du fichier de la matrice de phase des aérosol
	# Données commencant sur la première ligne
	# %lf\t%lf\t%lf\t%lf\t%lf => Correspondant à angle	p2	p1	p3	p4
PATHDIFFAER = fic/valid_T70.443

# Type de simulation
	# -2 pour atmosphere seule
	# -1 pour dioptre seul
	# 0 pour ocean et dioptre
	# 1 pour atmosphere et dioptre
	# 2 pour atmosphere dioptre et ocean (pas validé)
	# 3 pour ocean seul
SIM = -2

# Forcage de la premiere diffusion (utilise si SIM = -2)
DIFFF = 0


# Type de profil atmospherique
	# 0 : profil standard avec echelle de hauteur
	# 1 : profil à 2 ou 3 couches (comme dans les SOS)
	# 2 : profil utilisateurs, Attention au bon format -> commencer les données sur la 2ème ligne à la couche 0
PROFIL = 0

# Nom absolu du fichier du profil vertical atmosphérique utilisateur (utile uniquement si PROFIL = 2)
	# Le format du fichier doit être le suivant 
	# I	ALT		hmol(I)		haer(I)		H(I)		XDEL(I)		YDEL(I)  => Première ligne indicative, pas de données dessus
	# %d\t%f\t%f\t%f\t%f\t%f\t%f  => Format pour toutes les autres lignes
PATHPROFILATM = profil/molec_new_profil_mol_H8_AER_0_2_443

# Echelle de hauteur aerosol [km] (utilise si PROFIL=0) (float)
HA = 2.0

# Echelle de hauteur moleculaire [km] (float)
HR = 8.0

# Altitude basse de la couche aerosol [km] (utilise si PROFIL=3) (float)
ZMIN = 0.

# Altitude haute de la couche aerosol [km] (utilise si PROFIL=3) (float)
ZMAX = 1.

# Nombre de couche+1
NATM=3

# Altitude max de l'atmosphère
HATM=100


# Type de reflexion de la surface
	# 1 pour reflexion forcee sur le dioptre
	# 2 transmission forcee
	# 3 reflexion et transmission
SUR = 3

# Type de dioptre 
	# 0 = plan
	# 1 = agite avec reflexion multiple
	# 2 = agite sans reflexion multiple
	# 3 = surface lambertienne (uniquement sans océan)
DIOPTRE = 3

# Albedo simple de diffusion de la surface lambertienne (float)
W0LAM = 0.0

# Vitesse du vent [m/s] (utilise si idioptre=1) (modele de Cox et Munk) (float)
WINDSPEED = 5.0


# Indice de refraction relatif air/eau (float)
NH2O = 1.33

# Concentration en phytoplancton [mg.m-3] (utilise si SUR>=2) (float)
CONPHY = 0.1



###
## Paramètres autres de la simulation ##
#_____________________________________#

# Graine avec laquelle on initialise les generateurs aleatoires (int)
# si SEED est positif on l'utilise comme graine (cela permet d'avoir les memes nombres aleatoires d'une simulation a l'autre, et
# donc une meme simulation)
# si SEED=-1 on crée une graine aleatoirement (donc toutes les simulations sont differentes les unes des autres)
SEED = -1

# Le demi-espace dans lequel on récupère les photons est divisé en boites
# theta parcourt 0..PI
# phi parcourt 0..PI
NBTHETA = 180
NBPHI = 180

# Nombre d'échantillons pour la matrice de phase des aérosols (int)
LSAAER = 72001

# 
NFAER = 1000000

#
LSAOCE = 72001

#
NFOCE = 10000000


# Chemin du fichiers de sortie et témoin
PATHRESULTATSHDF = resultat/out.hdf

# Période d'écriture du fichier témoin en min (-1 pour désactiver)
WRITE_PERIOD = 5


###
## Paramètres de la carte graphique  ##
#____________________________________#

# Les threads sont rangés dans des blocks de taille XBLOCK*YBLOCK (limite par watchdog il faut tuer X + limite XBLOCK*YBLOCK =< 256
#ou 512)
# XBLOCK doit être un multiple de 32
# à laisser à 256 (tests d'optimisation effectues)
XBLOCK = 256
YBLOCK = 1

# et les blocks sont eux-même rangés dans un grid de taille XGRID*YGRID (limite par watchdog il faut tuer X + limite XGRID<65535 et YGRID<65535)
XGRID = 256
YGRID = 1

# Nombre de boucles dans le kernel (unsigned int) (limite par watchdog, il faut tuer X)
# Ne pas mettre NBLOOP à une valeur trop importante, ce qui conduit à des erreurs dans le résultats de sorti
# Si les résultats manquent de "lissage" pour les valeurs importantes de réflectance, réduire ce chiffre, relancer et comparer
# Une valeur de 5000 semble satisfaisante
NBLOOP = 5000
